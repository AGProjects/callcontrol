
Description
-----------

Call Control is an application that can be used together with OpenSIPS to
limit the duration of SIP sessions.

The applications that can be build upon this functionality include prepaid
systems using an external rating engine (by default CDRTool rating engine is
used), for limiting the maximum call duration to a certain value or being
able to close calls in progress based on various rules.

Call Control can close a call in progress, by sending BYE messages to both
parties, if the call does exceed its specified time limit or if Call Control
receives a command to forcefully close the call from outside. It will
however not send these fake BYE messages if the call is normally terminated
by either party involved in the conversation, before the call maximum
allowed time is exceeded.

The software is able to handle parallel sessions for prepaid users. The
modus operandi is based on a simple model: all prepaid sessions belonging to
the same SIP account must end at the same moment regadless of the called
destinations and their different prices. Whenever CDRTool rating engine
provides the MaxSessionTime for a new call setup, call control engine adjust
the maxsessions time for all sessions belonging to the same user. For more
information see chapter 'Simultaneous prepaid sessions' from
http://download.ag-projects.com/CDRTool/doc/PREPAID.txt

Call Control can also benefit from the MediaProxy >=2.0 session timeout
feature and terminate the session that have timed-out because the RTP
streams have stopped flowing without a BYE being received by the SIP Proxy.


License
-------

For licensing information please read the LICENSE file.


Installation
------------

The application requires callcontrol module available in OpenSIPS >=1.5 and
CDRTool >= 6.6.10.

For more information please consult the INSTALL file.


Prepaid Engine API
------------------

The API between call control and the rating engine is described in the CDRTool
documentation available at:

http://download.ag-projects.com/CDRTool/doc/PREPAID.txt

